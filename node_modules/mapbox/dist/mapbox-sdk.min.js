!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.MapboxClient=t()}}(function(){var t;return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e){"use strict";t("./promise");var n=t("rest/interceptor"),r=n({success:function(t){var e=t&&t.callback;return"function"==typeof e&&e(null,t.entity,t),t},error:function(t){var e=t&&t.callback;if("function"==typeof e){var n=t.error||t.entity;"object"!=typeof n&&(n=new Error(n)),e(n)}return t}});e.exports=r},{"./promise":11,"rest/interceptor":37}],2:[function(t,e){"use strict";t("./promise");var n=t("rest");e.exports=function(e){return n.wrap(t("rest/interceptor/errorCode")).wrap(t("rest/interceptor/pathPrefix"),{prefix:e.endpoint}).wrap(t("rest/interceptor/mime"),{mime:"application/json"}).wrap(t("rest/interceptor/template")).wrap(t("rest/interceptor/defaultRequest"),{params:{access_token:e.accessToken}}).wrap(t("./paginator"),{access_token:e.accessToken}).wrap(t("./standard_response")).wrap(t("./callbackify"))}},{"./callbackify":1,"./paginator":10,"./promise":11,"./standard_response":24,rest:33,"rest/interceptor/defaultRequest":38,"rest/interceptor/errorCode":39,"rest/interceptor/mime":40,"rest/interceptor/pathPrefix":41,"rest/interceptor/template":42}],3:[function(t,e){e.exports.DEFAULT_ENDPOINT="https://api.mapbox.com"},{}],4:[function(t,e){"use strict";function n(t){return t.map(function(t){a(t);var e=t.size||"l",n=t.symbol||"circle";return"pin-"+e+"-"+n+"("+t.longitude+","+t.latitude+")"}).join(",")}function r(t){i("LineString"===t.geojson.type,"path line must be a LineString");var e=s.fromGeoJSON(t.geojson),n="";return t.style&&(void 0!==t.style.strokewidth&&(n+="-"+t.style.strokewidth),void 0!==t.style.strokecolor&&(n+="+"+t.style.strokecolor)),"path"+n+"("+e+")"}function o(t){var e=JSON.stringify(t);return i(e.length<4096,"encoded GeoJSON must be shorter than 4096 characters long"),"geojson("+e+")"}var i=t("../vendor/invariant"),a=t("./invariant_location"),s=t("../vendor/polyline");e.exports.encodeMarkers=n,e.exports.encodePath=r,e.exports.encodeGeoJSON=o},{"../vendor/invariant":62,"../vendor/polyline":63,"./invariant_location":7}],5:[function(t,e){"use strict";function n(t){return t.map(function(t){return r(t),t.longitude+","+t.latitude}).join(";")}var r=t("./invariant_location");e.exports=n},{"./invariant_location":7}],6:[function(t,e){"use strict";function n(t){var e=t.split(".")[1];if(!e)return null;e=e.replace(/-/g,"+").replace(/_/g,"/");var n=e.length%4;if(2===n&&(e+="=="),3===n&&(e+="="),1===n||n>3)return null;try{return JSON.parse(r.decode(e)).u}catch(o){return null}}var r=t("rest/util/base64");e.exports=n},{"rest/util/base64":52}],7:[function(t,e){"use strict";function n(t){r("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties"),void 0!==t.zoom&&r("number"==typeof t.zoom,"zoom must be numeric")}var r=t("../vendor/invariant");e.exports=n},{"../vendor/invariant":62}],8:[function(t,e){"use strict";function n(t){function e(e,n){this.name=t,r("string"==typeof e,"accessToken required to instantiate Mapbox client");var s=o.DEFAULT_ENDPOINT;void 0!==n&&(r("object"==typeof n,"options must be an object"),n.endpoint&&(r("string"==typeof n.endpoint,"endpoint must be a string"),s=n.endpoint),n.account&&(r("string"==typeof n.account,"account must be a string"),this.owner=n.account)),this.client=i({endpoint:s,accessToken:e}),this.accessToken=e,this.endpoint=s,this.owner=this.owner||a(e),r(!!this.owner,"could not determine account from provided accessToken")}return e}var r=t("../vendor/invariant"),o=t("./constants"),i=t("./client"),a=t("./get_user");e.exports=n},{"../vendor/invariant":62,"./client":2,"./constants":3,"./get_user":6}],9:[function(t,e){"use strict";var n=t("./make_service"),r=t("../vendor/xtend").extendMutable,o=t("./get_user"),i=t("./services/geocoding"),a=t("./services/surface"),s=t("./services/directions"),u=t("./services/uploads"),c=t("./services/matching"),l=t("./services/datasets"),p=t("./services/matrix"),f=t("./services/tilestats"),h=t("./services/styles"),d=t("./services/static"),m=t("./services/tilesets"),y=t("./services/tokens"),v=n("MapboxClient");r(v.prototype,i.prototype,a.prototype,s.prototype,p.prototype,c.prototype,l.prototype,u.prototype,f.prototype,h.prototype,d.prototype,m.prototype,y.prototype),v.getUser=o,e.exports=v},{"../vendor/xtend":64,"./get_user":6,"./make_service":8,"./services/datasets":12,"./services/directions":13,"./services/geocoding":14,"./services/matching":15,"./services/matrix":16,"./services/static":17,"./services/styles":18,"./services/surface":19,"./services/tilesets":20,"./services/tilestats":21,"./services/tokens":22,"./services/uploads":23}],10:[function(t,e){"use strict";t("./promise");var n=t("rest/interceptor"),r=t("rest/parsers/rfc5988"),o=t("url"),i=t("querystring"),a=n({success:function(t,e){var n=t&&t.headers&&t.headers.Link,a=t&&t.request&&t.request.originator;if(n){var s=r.parse(n).filter(function(t){return"next"===t.rel})[0];s&&(t.nextPage=function(t){var n=o.parse(s.href),r=i.parse(n.query);return r.access_token=r.access_token||e.access_token,n.search=i.stringify(r),a({path:o.format(n),callback:t})})}return t}});e.exports=a},{"./promise":11,querystring:31,"rest/interceptor":37,"rest/parsers/rfc5988":50,url:60}],11:[function(t,e){"use strict";"undefined"==typeof Promise&&t("es6-promise").polyfill(),e["export"]=Promise},{"es6-promise":25}],12:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../../vendor/hat"),o=t("../make_service"),i=e.exports=o("MapboxDatasets"),a="/datasets/v1/{owner}{?access_token,limit,fresh}",s="/datasets/v1/{owner}/{dataset}{?access_token}",u="/datasets/v1/{owner}/{dataset}/features{?access_token,limit}",c="/datasets/v1/{owner}/{dataset}/features/{id}{?access_token}";i.prototype.listDatasets=function(t,e){return"function"==typeof t&&(e=t,t={}),this.client({path:a,params:{limit:t.limit,fresh:t.fresh,owner:this.owner},callback:e})},i.prototype.createDataset=function(t,e){return void 0===e&&"function"==typeof t&&(e=t,t={}),n("object"==typeof t,"options must be an object"),this.client({path:a,params:{owner:this.owner},entity:t,callback:e})},i.prototype.readDataset=function(t,e){return n("string"==typeof t,"dataset must be a string"),this.client({path:s,params:{owner:this.owner,dataset:t},callback:e})},i.prototype.updateDataset=function(t,e,r){return n("string"==typeof t,"dataset must be a string"),n("object"==typeof e,"options must be an object"),n(!!e.name||!!e.description,"options must include a name or a description"),this.client({path:s,params:{owner:this.owner,dataset:t},method:"patch",entity:e,callback:r})},i.prototype.deleteDataset=function(t,e){return n("string"==typeof t,"dataset must be a string"),this.client({path:s,params:{owner:this.owner,dataset:t},method:"delete",callback:e})},i.prototype.listFeatures=function(t,e,r){void 0===r&&"function"==typeof e&&(r=e,e={}),n("string"==typeof t,"dataset must be a string"),n("object"==typeof e,"options must be a object");var o={owner:this.owner,dataset:t};return e.limit&&(n("number"==typeof e.limit,"limit option must be a number"),o.limit=e.limit),this.client({path:u,params:o,callback:r})},i.prototype.insertFeature=function(t,e,o){n("string"==typeof e,"dataset must be a string");var i=t.id||r();return n("string"==typeof i,"The GeoJSON feature's id must be a string"),this.client({path:c,params:{owner:this.owner,dataset:e,id:i},method:"put",entity:t,callback:o})},i.prototype.readFeature=function(t,e,r){return n("string"==typeof t,"id must be a string"),n("string"==typeof e,"dataset must be a string"),this.client({path:c,params:{owner:this.owner,dataset:e,id:t},callback:r})},i.prototype.deleteFeature=function(t,e,r){return n("string"==typeof t,"id must be a string"),n("string"==typeof e,"dataset must be a string"),this.client({path:c,params:{owner:this.owner,dataset:e,id:t},method:"delete",callback:r})}},{"../../vendor/hat":61,"../../vendor/invariant":62,"../make_service":8}],13:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../format_points"),o=t("../make_service"),i=o("MapboxDirections"),a="/directions/v5/{account}/{profile}/{encodedWaypoints}.json{?access_token,alternatives,geometries,overview,radiuses,steps,continue_straight,bearings}";i.prototype.getDirections=function(t,e,o){void 0===o&&"function"==typeof e?(o=e,e={}):void 0===e&&(e={}),n(Array.isArray(t),"waypoints must be an array"),n("object"==typeof e,"options must be an object");var i=r(t),s={encodedWaypoints:i,profile:"driving",account:"mapbox",alternatives:!0,steps:!0,geometries:"geojson"};e.profile&&(n("string"==typeof e.profile,"profile option must be string"),s.profile=e.profile),e.account&&(n("string"==typeof e.account,"account option must be string"),s.account=e.account),"undefined"!=typeof e.alternatives&&(n("boolean"==typeof e.alternatives,"alternatives option must be boolean"),s.alternatives=e.alternatives),e.radiuses&&(n(Array.isArray(e.radiuses),"radiuses must be an array"),n(e.radiuses.length===t.length,"There must be as many radiuses as there are waypoints in the request"),s.radiuses=e.radiuses.join(";")),"undefined"!=typeof e.steps&&(n("boolean"==typeof e.steps,"steps option must be boolean"),s.steps=e.steps);var u=["polyline","geojson"];e.geometries&&(n(-1!==u.indexOf(e.geometries),"geometries option must be "+u),s.geometries=e.geometries);var c=["simplified","full"];return e.overview&&(n(-1!==c.indexOf(e.overview),"overview option must be "+c),s.overview=e.overview),"undefined"!=typeof e.continue_straight&&(n("boolean"==typeof e.continue_straight,"continue_straight option must be boolean"),s.continue_straight=e.continue_straight),e.bearings&&(n(Array.isArray(e.radiuses),"bearings must be an array"),n(e.bearings.length===t.length,"There must be as many bearings as there are waypoints in the request"),s.bearings=e.bearings.join(";")),this.client({path:a,params:s,callback:o})},e.exports=i},{"../../vendor/invariant":62,"../format_points":5,"../make_service":8}],14:[function(t,e){"use strict";function n(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var r=t("../../vendor/invariant"),o=t("../make_service"),i=o("MapboxGeocoding"),a="/geocoding/v5/{dataset}/{query}.json{?access_token,proximity,country,types,bbox,limit,autocomplete,language}",s="/geocoding/v5/{dataset}/{longitude},{latitude}.json{?access_token,types,limit,language}",u=5,c=3;i.prototype.geocodeForward=function(t,e,o){if(void 0===o&&"function"==typeof e&&(o=e,e={}),Array.isArray(t)){if("mapbox.places-permanent"!==e.dataset)throw new Error("Batch geocoding is only available with the mapbox.places-permanent endpoint. See https://mapbox.com/api-documentation/#batch-requests for details");t=t.join(";")}r("string"==typeof t,"query must be a string"),r("object"==typeof e,"options must be an object");var i={query:t,dataset:"mapbox.places"},s=c;return e.precision&&(r("number"==typeof e.precision,"precision option must be number"),s=e.precision),e.proximity&&(r("number"==typeof e.proximity.latitude&&"number"==typeof e.proximity.longitude,"proximity must be an object with numeric latitude & longitude properties"),i.proximity=n(e.proximity.longitude,s)+","+n(e.proximity.latitude,s)),e.bbox&&(r("number"==typeof e.bbox[0]&&"number"==typeof e.bbox[1]&&"number"==typeof e.bbox[2]&&"number"==typeof e.bbox[3]&&4===e.bbox.length,"bbox must be an array with numeric values in the form [minX, minY, maxX, maxY]"),i.bbox=e.bbox[0]+","+e.bbox[1]+","+e.bbox[2]+","+e.bbox[3]),e.limit&&(r("number"==typeof e.limit,"limit must be a number"),i.limit=e.limit),e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset),e.country&&(r("string"==typeof e.country,"country option must be string"),i.country=e.country),e.language&&(r("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(r("string"==typeof e.types,"types option must be string"),i.types=e.types),"boolean"==typeof e.autocomplete&&(r("boolean"==typeof e.autocomplete,"autocomplete must be a boolean"),i.autocomplete=e.autocomplete),this.client({path:a,params:i,callback:o})},i.prototype.geocodeReverse=function(t,e,o){void 0===o&&"function"==typeof e&&(o=e,e={}),r("object"==typeof t,"location must be an object"),r("object"==typeof e,"options must be an object"),r("number"==typeof t.latitude&&"number"==typeof t.longitude,"location must be an object with numeric latitude & longitude properties");var i={dataset:"mapbox.places"};e.dataset&&(r("string"==typeof e.dataset,"dataset option must be string"),i.dataset=e.dataset);var a=u;return e.precision&&(r("number"==typeof e.precision,"precision option must be number"),a=e.precision),e.language&&(r("string"==typeof e.language,"language option must be string"),i.language=e.language),e.types&&(r("string"==typeof e.types,"types option must be string"),i.types=e.types),e.limit&&(r("number"==typeof e.limit,"limit option must be a number"),r(1===e.types.split(",").length,"a single type must be specified to use the limit option"),i.limit=e.limit),i.longitude=n(t.longitude,a),i.latitude=n(t.latitude,a),this.client({path:s,params:i,callback:o})},e.exports=i},{"../../vendor/invariant":62,"../make_service":8}],15:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../make_service"),o=r("MapboxMatching"),i="/matching/v5/{account}/{profile}/{coordinates}.json{?access_token,geometries,radiuses,steps,overview,timestamps,annotations}";o.prototype.matching=function(t,e,r){void 0===r&&"function"==typeof e&&(r=e,e={}),n(Array.isArray(t),"coordinates must be an array");var o={profile:"driving",account:"mapbox",geometries:"geojson",coordinates:t.join(";")};e.profile&&(n("string"==typeof e.profile,"profile option must be string"),o.profile=e.profile);var a=["polyline","geojson"];e.geometries&&(n(-1!==a.indexOf(e.geometries),"geometries option must be "+a),o.geometries=e.geometries),e.radiuses&&(n(Array.isArray(e.radiuses),"radiuses must be an array"),n(e.radiuses.length===t.length,"There must be as many radiuses as there are coordinates in the request"),o.radiuses=e.radiuses.join(";")),"undefined"!=typeof e.steps&&(n("boolean"==typeof e.steps,"steps option must be boolean"),o.steps=e.steps);var s=["full","simplified"];return"undefined"!=typeof e.overview&&(n(-1!==s.indexOf(e.overview)||e.overview===!1,"overview option must be "+s+" or false"),o.overview=e.overview),e.timestamps&&(n(Array.isArray(e.timestamps),"timestamps must be an array"),n(e.timestamps.length===t.length,"There must be as many timestamps as there are coordinates in the request"),o.timestamps=e.timestamps.join(";")),e.annotations&&(n(Array.isArray(e.annotations),"annotations must be an array"),o.annotations=e.annotations.join()),this.client({path:i,params:o,method:"get",callback:r})},e.exports=o},{"../../vendor/invariant":62,"../make_service":8}],16:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../format_points"),o=t("../make_service"),i=o("MapboxMatrix"),a="/directions-matrix/v1/mapbox/{profile}/{encodedWaypoints}.json{?access_token}";i.prototype.getMatrix=function(t,e,o){void 0===o&&"function"==typeof e?(o=e,e={}):void 0===e&&(e={}),n(Array.isArray(t),"waypoints must be an array"),n("object"==typeof e,"options must be an object");var i=r(t),s={encodedWaypoints:i,profile:"driving"};return e.profile&&(n("string"==typeof e.profile,"profile option must be string"),s.profile=e.profile),this.client({path:a,params:s,callback:o})},e.exports=i},{"../../vendor/invariant":62,"../format_points":5,"../make_service":8}],17:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../../vendor/xtend").extend,o=t("rest/util/uriTemplate"),i=t("../encode_overlay"),a=t("../invariant_location"),s=t("../make_service"),u=s("MapboxStatic"),c="/styles/v1/{username}/{styleid}/static{+overlay}/{+xyzbp}/{width}x{height}{+retina}{?access_token,attribution,logo,before_layer}",l="/v4/{mapid}{+overlay}/{+xyz}/{width}x{height}{+retina}{.format}{?access_token}";u.prototype.getStaticURL=function(t,e,s,u,l,p){n("string"==typeof t,"username option required and must be a string"),n("string"==typeof e,"styleid option required and must be a string"),n("number"==typeof s,"width option required and must be a number"),n("number"==typeof u,"height option required and must be a number");var f,h={retina:""};"auto"===l?f="auto":(a(l),f=l.longitude+","+l.latitude+","+l.zoom,"pitch"in l?f+=","+(l.bearing||0)+","+l.pitch:"bearing"in l&&(f+=","+l.bearing));var d={};p&&(n("object"==typeof p,"options must be an object"),p.format&&(n("string"==typeof p.format,"format must be a string"),d.format=p.format),p.retina&&(n("boolean"==typeof p.retina,"retina must be a boolean"),d.retina=p.retina),p.markers?d.overlay="/"+i.encodeMarkers(p.markers):p.geojson?d.overlay="/"+i.encodeGeoJSON(p.geojson):p.path&&(d.overlay="/"+i.encodePath(p.path)),"attribution"in p&&(n("boolean"==typeof p.attribution,"attribution must be a boolean"),d.attribution=p.attribution),"logo"in p&&(n("boolean"==typeof p.logo,"logo must be a boolean"),d.logo=p.logo),p.before_layer&&(n("string"==typeof p.before_layer,"before_layer must be a string"),d.before_layer=p.before_layer));var m=r(h,d,{username:t,styleid:e,width:s,xyzbp:f,height:u,access_token:this.accessToken});return m.retina===!0&&(m.retina="@2x"),this.endpoint+o.expand(c,m)},u.prototype.getStaticClassicURL=function(t,e,s,u,c){n("string"==typeof t,"mapid option required and must be a string"),n("number"==typeof e,"width option required and must be a number"),n("number"==typeof s,"height option required and must be a number");var p,f={format:"png",retina:""};"auto"===u?p="auto":(a(u),p=u.longitude+","+u.latitude+","+u.zoom);var h={};c&&(n("object"==typeof c,"options must be an object"),c.format&&(n("string"==typeof c.format,"format must be a string"),h.format=c.format),c.retina&&(n("boolean"==typeof c.retina,"retina must be a boolean"),h.retina=c.retina),c.markers?h.overlay="/"+i.encodeMarkers(c.markers):c.geojson?h.overlay="/"+i.encodeGeoJSON(c.geojson):c.path&&(h.overlay="/"+i.encodePath(c.path)));var d=r(f,h,{mapid:t,width:e,xyz:p,height:s,access_token:this.accessToken});return d.retina===!0&&(d.retina="@2x"),this.endpoint+o.expand(l,d)},e.exports=u},{"../../vendor/invariant":62,"../../vendor/xtend":64,"../encode_overlay":4,"../invariant_location":7,"../make_service":8,"rest/util/uriTemplate":59}],18:[function(t,e){(function(n){"use strict";var r=t("../../vendor/invariant"),o=t("rest/util/uriTemplate"),i=t("../make_service"),a=e.exports=i("MapboxStyles"),s="/styles/v1/{owner}{?access_token}",u="/styles/v1/{owner}{?access_token}",c="/styles/v1/{owner}/{styleid}{?access_token}",l="/styles/v1/{owner}/{styleid}{?access_token}",p="/styles/v1/{owner}/{styleid}{?access_token}",f="/styles/v1/{owner}/{styleid}.html{?access_token,zoomwheel,title}",h="/styles/v1/{owner}/{styleid}/sprite{+retina}{.format}{?access_token}",d="/styles/v1/{owner}/{styleid}/sprite/{iconName}{?access_token}",m="/fonts/v1/{owner}/{font}/{start}-{end}.pbf{?access_token}";a.prototype.listStyles=function(t){return this.client({path:s,params:{owner:this.owner},callback:t})},a.prototype.createStyle=function(t,e){return this.client({path:u,params:{owner:this.owner},entity:t,callback:e})},a.prototype.updateStyle=function(t,e,n){return r("string"==typeof e,"style id must be a string"),this.client({path:l,params:{owner:this.owner,styleid:e},entity:t,method:"patch",callback:n})},a.prototype.deleteStyle=function(t,e){return r("string"==typeof t,"styleid must be a string"),this.client({path:p,params:{owner:this.owner,styleid:t},method:"delete",callback:e})},a.prototype.readStyle=function(t,e){return r("string"==typeof t,"styleid must be a string"),this.client({path:c,params:{owner:this.owner,styleid:t},callback:e})},a.prototype.readSprite=function(t,e,n){r("string"==typeof t,"styleid must be a string"),"function"==typeof e&&(n=e,e={});var o="";e.retina&&(r("boolean"==typeof e.retina,"retina option must be a boolean value"),e.retina&&(o="@2x"));var i="json";return e.format&&(r("json"===e.format||"png"===e.format,"format parameter must be either json or png"),i=e.format),this.client({path:h,params:{owner:this.owner,retina:o,format:i,styleid:t},callback:n})},a.prototype.readFontGlyphRanges=function(t,e,n,o){return r("string"==typeof t,"font must be a string"),r("number"==typeof e,"start must be a number"),r("number"==typeof n,"end must be a number"),this.client({path:m,params:{owner:this.owner,font:t,start:e,end:n},callback:o})},a.prototype.addIcon=function(t,e,o,i){return r("string"==typeof t,"style must be a string"),r("string"==typeof e,"icon name must be a string"),r(n.isBuffer(o),"icon must be a Buffer"),this.client({path:d,params:{owner:this.owner,styleid:t,iconName:e},headers:{"Content-Type":"text/plain"},entity:o,method:"put",callback:i})},a.prototype.deleteIcon=function(t,e,n){return r("string"==typeof t,"style must be a string"),r("string"==typeof e,"icon name must be a string"),this.client({path:d,params:{owner:this.owner,styleid:t,iconName:e},method:"delete",callback:n})},a.prototype.embedStyle=function(t,e){r("string"==typeof t,"style must be a string");var n={styleid:t,access_token:this.accessToken,owner:this.owner,title:!1,zoomwheel:!0};return e&&(void 0!==e.title&&(r("boolean"==typeof e.title,"title must be a boolean"),n.title=e.title),void 0!==e.zoomwheel&&(r("boolean"==typeof e.zoomwheel,"zoomwheel must be a boolean"),n.zoomwheel=e.zoomwheel)),this.endpoint+o.expand(f,n)}}).call(this,{isBuffer:t("../../node_modules/is-buffer/index.js")})},{"../../node_modules/is-buffer/index.js":26,"../../vendor/invariant":62,"../make_service":8,"rest/util/uriTemplate":59}],19:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../format_points"),o=t("../make_service"),i=o("MapboxSurface"),a="/v4/surface/{mapid}.json{?access_token,layer,fields,points,geojson,interpolate,encoded_polyline}";i.prototype.surface=function(t,e,o,i,s,u){void 0===u&&"function"==typeof s&&(u=s,s={}),n("string"==typeof t,"mapid must be a string"),n("string"==typeof e,"layer must be a string"),n(Array.isArray(o),"fields must be an array of strings"),n(Array.isArray(i)||"string"==typeof i,"path must be an array of objects or a string"),n("object"==typeof s,"options must be an object");var c=!0,l=!1;void 0!==s.interpolate&&(n("boolean"==typeof s.interpolate,"interpolate must be a boolean"),c=s.interpolate),void 0!==s.geojson&&(n("boolean"==typeof s.geojson,"geojson option must be boolean"),l=s.geojson);var p={geojson:l,layer:e,mapid:t,fields:o.join(","),interpolate:c};return Array.isArray(i)?p.points=r(i):p.encoded_polyline=i,void 0!==s.zoom&&(n("number"==typeof s.zoom,"zoom must be a number"),p.z=s.zoom),this.client({path:a,params:p,callback:u})},e.exports=i},{"../../vendor/invariant":62,"../format_points":5,"../make_service":8}],20:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../make_service"),o=e.exports=r("MapboxTilesets"),i="/v4/{mapid}/tilequery/{longitude},{latitude}.json{?access_token,radius,limit}",a="/tilesets/v1/{owner}{?access_token,limit}";o.prototype.tilequery=function(t,e,r,o){return n("string"==typeof t,"mapid must be a string"),n("object"==typeof e,"position must be an array"),n(2==e.length,"position must be an array of length 2"),n("number"==typeof e[0]&&"number"==typeof e[1],"position must be an array of two numbers"),"function"==typeof r&&(o=r,r={}),this.client({path:i,params:{mapid:t,longitude:e[0],latitude:e[1],radius:r.radius,limit:r.limit},callback:o})},o.prototype.listTilesets=function(t,e){return"function"==typeof t&&(e=t,t=null),t=t||{},this.client({path:a,params:{owner:this.owner,limit:t.limit},callback:e})}},{"../../vendor/invariant":62,"../make_service":8}],21:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../make_service"),o=e.exports=r("MapboxTilestats"),i="/tilestats/v1/{owner}/{tileset}{?access_token}";o.prototype.getTilestats=function(t,e){n("string"==typeof t,"tileset must be a string");var r=t.split(".")[0];return r===t&&(r=this.owner),this.client({path:i,params:{owner:r,tileset:t},callback:e})},o.prototype.putTilestats=function(t,e,r){n("string"==typeof t,"tileset must be a string");var o=t.split(".")[0];return o===t&&(o=this.owner),this.client({path:i,params:{owner:o,tileset:t},entity:e,method:"put",callback:r})}},{"../../vendor/invariant":62,"../make_service":8}],22:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../make_service"),o=e.exports=r("MapboxTokens"),i="/tokens/v2/{owner}{?access_token}",a="/tokens/v2/{owner}{?access_token}",s="/tokens/v2/{owner}/{authorization_id}{?access_token}",u="/tokens/v2/{owner}/{authorization_id}{?access_token}",c="/tokens/v2{?access_token}",l="/scopes/v1/{owner}{?access_token}";o.prototype.listTokens=function(t){return this.client({path:i,params:{owner:this.owner},callback:t})},o.prototype.createToken=function(t,e,r){return n("string"==typeof t,"note must be a string"),n("[object Array]"===Object.prototype.toString.call(e),"scopes must be an array"),this.client({path:a,params:{owner:this.owner},entity:{scopes:e,note:t},callback:r})},o.prototype.createTemporaryToken=function(t,e,r){return n("string"==typeof t,"expires must be a string"),n("[object Array]"===Object.prototype.toString.call(e),"scopes must be an array"),this.client({path:a,params:{owner:this.owner},entity:{scopes:e,expires:t},callback:r})},o.prototype.updateTokenAuthorization=function(t,e,r){return n("string"==typeof t,"authorization_id must be a string"),n("[object Array]"===Object.prototype.toString.call(e),"scopes must be an array"),this.client({path:s,params:{authorization_id:t,owner:this.owner},entity:{scopes:e},method:"patch",callback:r})},o.prototype.deleteTokenAuthorization=function(t,e){return n("string"==typeof t,"authorization_id must be a string"),this.client({path:u,params:{authorization_id:t,owner:this.owner},method:"delete",callback:e})},o.prototype.retrieveToken=function(t,e){return n("string"==typeof t,"access_token must be a string"),this.client({path:c,params:{access_token:t},callback:e})},o.prototype.listScopes=function(t){return this.client({path:l,params:{owner:this.owner},callback:t})}},{"../../vendor/invariant":62,"../make_service":8}],23:[function(t,e){"use strict";var n=t("../../vendor/invariant"),r=t("../make_service"),o=e.exports=r("MapboxUploads"),i="/uploads/v1/{owner}{?access_token}",a="/uploads/v1/{owner}/{upload}{?access_token}",s="/uploads/v1/{owner}/credentials{?access_token}";o.prototype.listUploads=function(t){return this.client({path:i,params:{owner:this.owner},callback:t})},o.prototype.createUploadCredentials=function(t){return this.client({path:s,params:{owner:this.owner},method:"post",callback:t})},o.prototype.createUpload=function(t,e){return n("object"==typeof t,"options must be an object"),this.client({path:i,params:{owner:this.owner},entity:t,callback:e})},o.prototype.readUpload=function(t,e){return n("string"==typeof t,"upload must be a string"),this.client({path:a,params:{owner:this.owner,upload:t},callback:e})},o.prototype.deleteUpload=function(t,e){return n("string"==typeof t,"upload must be a string"),this.client({method:"delete",path:a,params:{owner:this.owner,upload:t},callback:e})}},{"../../vendor/invariant":62,"../make_service":8}],24:[function(t,e){function n(t){return{url:t.url,status:t.status&&t.status.code,headers:t.headers,entity:t.entity,error:t.error,callback:t.request&&t.request.callback,nextPage:t.nextPage}}var r=t("rest/interceptor"),o=r({response:n});e.exports=o},{"rest/interceptor":37}],25:[function(e,n,r){(function(o,i){!function(e,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof t&&t.amd?t(o):e.ES6Promise=o()}(this,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function n(t){return"function"==typeof t}function r(t){Y=t}function a(t){Z=t}function s(){return function(){return o.nextTick(f)}}function u(){return"undefined"!=typeof W?function(){W(f)}:p()}function c(){var t=0,e=new X(f),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function l(){var t=new MessageChannel;return t.port1.onmessage=f,function(){return t.port2.postMessage(0)}}function p(){var t=setTimeout;return function(){return t(f,1)}}function f(){for(var t=0;$>t;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0}$=0}function h(){try{var t=e,n=t("vertx");return W=n.runOnLoop||n.runOnContext,u()}catch(r){return p()}}function d(t,e){var n=arguments,r=this,o=new this.constructor(y);void 0===o[ot]&&U(o);var i=r._state;return i?!function(){var t=n[i-1];Z(function(){return E(i,o,t,r._result)})}():S(r,o,t,e),o}function m(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(y);return j(n,t),n}function y(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(t){try{return t.then}catch(e){return ut.error=e,ut}}function w(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function x(t,e,n){Z(function(t){var r=!1,o=w(n,e,function(n){r||(r=!0,e!==n?j(t,n):C(t,n))},function(e){r||(r=!0,O(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,O(t,o))},t)}function _(t,e){e._state===at?C(t,e._result):e._state===st?O(t,e._result):S(e,void 0,function(e){return j(t,e)},function(e){return O(t,e)})}function k(t,e,r){e.constructor===t.constructor&&r===d&&e.constructor.resolve===m?_(t,e):r===ut?(O(t,ut.error),ut.error=null):void 0===r?C(t,e):n(r)?x(t,e,r):C(t,e)}function j(e,n){e===n?O(e,v()):t(n)?k(e,n,b(n)):C(e,n)}function A(t){t._onerror&&t._onerror(t._result),P(t)}function C(t,e){t._state===it&&(t._result=e,t._state=at,0!==t._subscribers.length&&Z(P,t))}function O(t,e){t._state===it&&(t._state=st,t._result=e,Z(A,t))}function S(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+at]=n,o[i+st]=r,0===i&&t._state&&Z(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?E(n,r,o,i):o(i);t._subscribers.length=0}}function q(){this.error=null}function T(t,e){try{return t(e)}catch(n){return ct.error=n,ct}}function E(t,e,r,o){var i=n(r),a=void 0,s=void 0,u=void 0,c=void 0;if(i){if(a=T(r,o),a===ct?(c=!0,s=a.error,a.error=null):u=!0,e===a)return void O(e,g())}else a=o,u=!0;e._state!==it||(i&&u?j(e,a):c?O(e,s):t===at?C(e,a):t===st&&O(e,a))}function z(t,e){try{e(function(e){j(t,e)},function(e){O(t,e)})}catch(n){O(t,n)}}function M(){return lt++}function U(t){t[ot]=lt++,t._state=void 0,t._result=void 0,t._subscribers=[]}function F(t,e){this._instanceConstructor=t,this.promise=new t(y),this.promise[ot]||U(this.promise),Q(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&C(this.promise,this._result))):O(this.promise,D())}function D(){return new Error("Array Methods must be provided an Array")}function I(t){return new F(this,t).promise}function R(t){var e=this;return new e(Q(t)?function(n,r){for(var o=t.length,i=0;o>i;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function N(t){var e=this,n=new e(y);return O(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");

}function J(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function B(t){this[ot]=M(),this._result=this._state=void 0,this._subscribers=[],y!==t&&("function"!=typeof t&&L(),this instanceof B?z(this,t):J())}function G(){var t=void 0;if("undefined"!=typeof i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=B}var H=void 0;H=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Q=H,$=0,W=void 0,Y=void 0,Z=function(t,e){nt[$]=t,nt[$+1]=e,$+=2,2===$&&(Y?Y(f):rt())},V="undefined"!=typeof window?window:void 0,K=V||{},X=K.MutationObserver||K.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof o&&"[object process]"==={}.toString.call(o),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3),rt=void 0;rt=tt?s():X?c():et?l():void 0===V&&"function"==typeof e?h():p();var ot=Math.random().toString(36).substring(16),it=void 0,at=1,st=2,ut=new q,ct=new q,lt=0;return F.prototype._enumerate=function(t){for(var e=0;this._state===it&&e<t.length;e++)this._eachEntry(t[e],e)},F.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===m){var o=b(t);if(o===d&&t._state!==it)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===B){var i=new n(y);k(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},F.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===it&&(this._remaining--,t===st?O(r,n):this._result[e]=n),0===this._remaining&&C(r,this._result)},F.prototype._willSettleAt=function(t,e){var n=this;S(t,void 0,function(t){return n._settledAt(at,e,t)},function(t){return n._settledAt(st,e,t)})},B.all=I,B.race=R,B.resolve=m,B.reject=N,B._setScheduler=r,B._setAsap=a,B._asap=Z,B.prototype={constructor:B,then:d,"catch":function(t){return this.then(null,t)}},B.polyfill=G,B.Promise=B,B})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:27}],26:[function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}e.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},{}],27:[function(t,e){function n(t){if(u===setTimeout)return setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function r(t){if(c===clearTimeout)return clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function o(){h&&p&&(h=!1,p.length?f=p.concat(f):d=-1,f.length&&i())}function i(){if(!h){var t=n(o);h=!0;for(var e=f.length;e;){for(p=f,f=[];++d<e;)p&&p[d].run();d=-1,e=f.length}p=null,h=!1,r(t)}}function a(t,e){this.fun=t,this.array=e}function s(){}var u,c,l=e.exports={};!function(){try{u=setTimeout}catch(t){u=function(){throw new Error("setTimeout is not defined")}}try{c=clearTimeout}catch(t){c=function(){throw new Error("clearTimeout is not defined")}}}();var p,f=[],h=!1,d=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new a(t,e)),1!==f.length||h||n(i)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=s,l.addListener=s,l.once=s,l.off=s,l.removeListener=s,l.removeAllListeners=s,l.emit=s,l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],28:[function(e,n,r){(function(e){!function(o){function i(t){throw new RangeError(M[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(z,".");var o=t.split("."),i=a(o,e).join(".");return r+i}function u(t){for(var e,n,r=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:k}function p(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?F(t/O):t>>1,t+=F(t/e);t>U*A>>1;r+=k)t=F(t/U);return F(r+(U+1)*t/(t+C))}function h(t){var e,n,r,o,a,s,u,p,h,d,m=[],y=t.length,v=0,g=P,b=S;for(n=t.lastIndexOf(q),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&i("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;y>o;){for(a=v,s=1,u=k;o>=y&&i("invalid-input"),p=l(t.charCodeAt(o++)),(p>=k||p>F((_-v)/s))&&i("overflow"),v+=p*s,h=b>=u?j:u>=b+A?A:u-b,!(h>p);u+=k)d=k-h,s>F(_/d)&&i("overflow"),s*=d;e=m.length+1,b=f(v-a,e,0==a),F(v/e)>_-g&&i("overflow"),g+=F(v/e),v%=e,m.splice(v++,0,g)}return c(m)}function d(t){var e,n,r,o,a,s,c,l,h,d,m,y,v,g,b,w=[];for(t=u(t),y=t.length,e=P,n=0,a=S,s=0;y>s;++s)m=t[s],128>m&&w.push(D(m));for(r=o=w.length,o&&w.push(q);y>r;){for(c=_,s=0;y>s;++s)m=t[s],m>=e&&c>m&&(c=m);for(v=r+1,c-e>F((_-n)/v)&&i("overflow"),n+=(c-e)*v,e=c,s=0;y>s;++s)if(m=t[s],e>m&&++n>_&&i("overflow"),m==e){for(l=n,h=k;d=a>=h?j:h>=a+A?A:h-a,!(d>l);h+=k)b=l-d,g=k-d,w.push(D(p(d+b%g,0))),l=F(b/g);w.push(D(p(l,0))),a=f(n,v,r==o),n=0,++r}++n,++e}return w.join("")}function m(t){return s(t,function(t){return T.test(t)?h(t.slice(4).toLowerCase()):t})}function y(t){return s(t,function(t){return E.test(t)?"xn--"+d(t):t})}var v="object"==typeof r&&r&&!r.nodeType&&r,g="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof e&&e;(b.global===b||b.window===b||b.self===b)&&(o=b);var w,x,_=2147483647,k=36,j=1,A=26,C=38,O=700,S=72,P=128,q="-",T=/^xn--/,E=/[^\x20-\x7E]/,z=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=k-j,F=Math.floor,D=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:u,encode:c},decode:h,encode:d,toASCII:y,toUnicode:m},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return w});else if(v&&g)if(n.exports==v)g.exports=w;else for(x in w)w.hasOwnProperty(x)&&(v[x]=w[x]);else o.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,o,i){e=e||"&",o=o||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;c>l;++l){var p,f,h,d,m=t[l].replace(s,"%20"),y=m.indexOf(o);y>=0?(p=m.substr(0,y),f=m.substr(y+1)):(p=m,f=""),h=decodeURIComponent(p),d=decodeURIComponent(f),n(a,h)?r(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],30:[function(t,e){"use strict";function n(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,a,s){return e=e||"&",a=a||"=",null===t&&(t=void 0),"object"==typeof t?n(i(t),function(i){var s=encodeURIComponent(r(i))+a;return o(t[i])?n(t[i],function(t){return s+encodeURIComponent(r(t))}).join(e):s+encodeURIComponent(r(t[i]))}).join(e):s?encodeURIComponent(r(s))+a+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],31:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":29,"./encode":30}],32:[function(t,e){"use strict";function n(t,e){var n,r,o,i,s;if(n=t,o={},e){for(r in e)s=new RegExp("\\{"+r+"\\}"),s.test(n)?n=n.replace(s,encodeURIComponent(e[r]),"g"):o[r]=e[r];i=a.write(o),i&&(n+=-1===n.indexOf("?")?"?":"&",n+=i)}return n}function r(t,e){return 0===t.indexOf(e)}function o(t,e){return this instanceof o?void(t instanceof o?(this._template=t.template,this._params=i({},this._params,e)):(this._template=(t||"").toString(),this._params=e||{})):new o(t,e)}var i,a,s,u,c,l;i=t("./util/mixin"),a=t("./mime/type/application/x-www-form-urlencoded"),u=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,c=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,l=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,o.prototype={append:function(t,e){return new o(this._template+t,i({},this._params,e))},fullyQualify:function(){if("undefined"==typeof location)return this;if(this.isFullyQualified())return this;var t=this._template;return r(t,"//")?t=s.protocol+t:r(t,"/")?t=s.origin+t:this.isAbsolute()||(t=s.origin+s.pathname.substring(0,s.pathname.lastIndexOf("/")+1)),-1===t.indexOf("/",8)&&(t+="/"),new o(t,this._params)},isAbsolute:function(){return c.test(this.build())},isFullyQualified:function(){return l.test(this.build())},isCrossOrigin:function(){if(!s)return!0;var t=this.parts();return t.protocol!==s.protocol||t.hostname!==s.hostname||t.port!==s.port},parts:function(){var t,e;return t=this.fullyQualify().build().match(u),e={href:t[0],protocol:t[1],host:t[3]||"",hostname:t[4]||"",port:t[6],pathname:t[7]||"",search:t[8]||"",hash:t[9]||""},e.origin=e.protocol+"//"+e.host,e.port=e.port||("https:"===e.protocol?"443":"http:"===e.protocol?"80":""),e},build:function(t){return n(this._template,i({},this._params,t))},toString:function(){return this.build()}},s="undefined"!=typeof location?new o(location.href).parts():void 0,e.exports=o},{"./mime/type/application/x-www-form-urlencoded":47,"./util/mixin":55}],33:[function(t,e){"use strict";var n=t("./client/default"),r=t("./client/xhr");n.setPlatformDefaultClient(r),e.exports=n},{"./client/default":35,"./client/xhr":36}],34:[function(t,e){"use strict";e.exports=function(t,e){return e&&(t.skip=function(){return e}),t.wrap=function(e,n){return e(t,n)},t.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),t.wrap.apply(this,arguments)},t}},{}],35:[function(t,e){"use strict";function n(){return o.apply(void 0,arguments)}var r,o,i;r=t("../client"),"function"!=typeof Promise&&console&&console.log&&console.log("An ES6 Promise implementation is required to use rest.js. See https://github.com/cujojs/when/blob/master/docs/es6-promise-shim.md for using when.js as a Promise polyfill."),n.setDefaultClient=function(t){o=t},n.getDefaultClient=function(){return o},n.resetDefaultClient=function(){o=i},n.setPlatformDefaultClient=function(t){if(i)throw new Error("Unable to redefine platformDefaultClient");o=i=t},e.exports=r(n)},{"../client":34}],36:[function(t,e){"use strict";function n(t){var e={};return t?(t.trim().split(s).forEach(function(t){var n,r,i;n=t.indexOf(":"),r=o(t.substring(0,n).trim()),i=t.substring(n+1).trim(),e[r]?Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i}),e):e}function r(t,e){return Object.keys(e||{}).forEach(function(n){if(e.hasOwnProperty(n)&&n in t)try{t[n]=e[n]}catch(r){}}),t}var o,i,a,s;o=t("../util/normalizeHeaderName"),i=t("../util/responsePromise"),a=t("../client"),s=/[\r|\n]+/,e.exports=a(function(t){return i.promise(function(e,o){var i,a,s,u,c,l,p,f;if(t="string"==typeof t?{path:t}:t||{},p={request:t},t.canceled)return p.error="precanceled",void o(p);if(f=t.engine||XMLHttpRequest,!f)return void o({request:t,error:"xhr-not-available"});c=t.entity,t.method=t.method||(c?"POST":"GET"),a=t.method,s=p.url=t.path||"";try{i=p.raw=new f,r(i,t.mixin),i.open(a,s,!0),r(i,t.mixin),u=t.headers;for(l in u)("Content-Type"!==l||"multipart/form-data"!==u[l])&&i.setRequestHeader(l,u[l]);t.canceled=!1,t.cancel=function(){t.canceled=!0,i.abort(),o(p)},i.onreadystatechange=function(){t.canceled||i.readyState===(f.DONE||4)&&(p.status={code:i.status,text:i.statusText},p.headers=n(i.getAllResponseHeaders()),p.entity=i.responseText,1223===p.status.code&&(p.status.code=204),p.status.code>0?e(p):setTimeout(function(){e(p)},0))};try{i.onerror=function(){p.error="loaderror",o(p)}}catch(h){}i.send(c)}catch(h){p.error="loaderror",o(p)}})})},{"../client":34,"../util/normalizeHeaderName":56,"../util/responsePromise":57}],37:[function(t,e){"use strict";function n(t){return t}function r(t){return t}function o(t){return t}function i(t){return this instanceof i?void u(this,t):new i(t)}function a(t){var e,a,u,p;return t=t||{},e=t.init||n,a=t.request||r,u=t.success||t.response||o,p=t.error||function(){return Promise.resolve((t.response||o).apply(this,arguments)).then(Promise.reject.bind(Promise))},function(n,r){function o(t){var e,s;return e={},s={arguments:Array.prototype.slice.call(arguments),client:o},t="string"==typeof t?{path:t}:t||{},t.originator=t.originator||o,c(a.call(e,t,r,s),function(t){var o,a,c;return c=n,t instanceof i&&(a=t.abort,c=t.client||c,o=t.response,t=t.request),o=o||Promise.resolve(t).then(function(t){return Promise.resolve(c(t)).then(function(t){return u.call(e,t,r,s)},function(t){return p.call(e,t,r,s)})}),a?Promise.race([o,a]):o},function(e){return Promise.reject({request:t,error:e})})}return"object"==typeof n&&(r=n),"function"!=typeof n&&(n=t.client||s),r=e(r||{}),l(o,n)}}var s,u,c,l;s=t("./client/default"),u=t("./util/mixin"),c=t("./util/responsePromise"),l=t("./client"),a.ComplexRequest=i,e.exports=a},{"./client":34,"./client/default":35,"./util/mixin":55,"./util/responsePromise":57}],38:[function(t,e){"use strict";var n,r,o;n=t("../interceptor"),r=t("../util/mixin"),o=function(){function t(t,e,n){(t in e||t in n)&&(e[t]=r({},n[t],e[t]))}function e(t,e,n){t in n&&!(t in e)&&(e[t]=n[t])}var n={method:e,path:e,params:t,headers:t,entity:e,mixin:t};return function(t,e){for(var r in n)n[r](r,t,e);return t}}(),e.exports=n({request:function(t,e){return o(t,e)}})},{"../interceptor":37,"../util/mixin":55}],39:[function(t,e){"use strict";var n;n=t("../interceptor"),e.exports=n({init:function(t){return t.code=t.code||400,t},response:function(t,e){return t.status&&t.status.code>=e.code?Promise.reject(t):t}})},{"../interceptor":37}],40:[function(t,e){"use strict";var n,r,o,i,a,s;n=t("../interceptor"),r=t("../mime"),o=t("../mime/registry"),s=t("../util/attempt"),i={read:function(t){return t},write:function(t){return t}},a={read:function(){throw"No read method found on converter"},write:function(){throw"No write method found on converter"}},e.exports=n({init:function(t){return t.registry=t.registry||o,t},request:function(t,e){var n,o;return o=t.headers||(t.headers={}),n=r.parse(o["Content-Type"]||e.mime||"text/plain"),o.Accept=o.Accept||e.accept||n.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in t?(o["Content-Type"]=n.raw,e.registry.lookup(n)["catch"](function(){if(e.permissive)return i;throw"mime-unknown"}).then(function(r){var o=e.client||t.originator,i=r.write||a.write;return s(i.bind(void 0,t.entity,{client:o,request:t,mime:n,registry:e.registry}))["catch"](function(){throw"mime-serialization"}).then(function(e){return t.entity=e,t})})):t},response:function(t,e){if(!(t.headers&&t.headers["Content-Type"]&&t.entity))return t;var n=r.parse(t.headers["Content-Type"]);return e.registry.lookup(n)["catch"](function(){return i}).then(function(r){var o=e.client||t.request&&t.request.originator,i=r.read||a.read;return s(i.bind(void 0,t.entity,{client:o,response:t,mime:n,registry:e.registry}))["catch"](function(e){throw t.error="mime-deserialization",t.cause=e,t}).then(function(e){return t.entity=e,t})})}})},{"../interceptor":37,"../mime":43,"../mime/registry":44,"../util/attempt":51}],41:[function(t,e){"use strict";function n(t,e){return 0===t.indexOf(e)}function r(t,e){return t.lastIndexOf(e)+e.length===t.length}var o,i;o=t("../interceptor"),i=t("../UrlBuilder"),e.exports=o({request:function(t,e){var o;return e.prefix&&!new i(t.path).isFullyQualified()&&(o=e.prefix,t.path&&(r(o,"/")||n(t.path,"/")||(o+="/"),o+=t.path),t.path=o),t}})},{"../UrlBuilder":32,"../interceptor":37}],42:[function(t,e){"use strict";var n,r,o;n=t("../interceptor"),r=t("../util/uriTemplate"),o=t("../util/mixin"),e.exports=n({init:function(t){return t.params=t.params||{},t.template=t.template||"",t},request:function(t,e){var n,i;return n=t.path||e.template,i=o({},t.params,e.params),t.path=r.expand(n,i),delete t.params,t}})},{"../interceptor":37,"../util/mixin":55,"../util/uriTemplate":59}],43:[function(t,e){"use strict";function n(t){var e,n;return e=t.split(";"),n=e[0].trim().split("+"),{raw:t,type:n[0],suffix:n[1]?"+"+n[1]:"",params:e.slice(1).reduce(function(t,e){return e=e.split("="),t[e[0].trim()]=e[1]?e[1].trim():void 0,t},{})}}e.exports={parse:n}},{}],44:[function(t,e){"use strict";function n(t){this.lookup=function(e){var n;return n="string"==typeof e?r.parse(e):e,t[n.raw]?t[n.raw]:t[n.type+n.suffix]?t[n.type+n.suffix]:t[n.type]?t[n.type]:t[n.suffix]?t[n.suffix]:Promise.reject(new Error('Unable to locate converter for mime "'+n.raw+'"'))},this.delegate=function(t){return{read:function(){var e=arguments;return this.lookup(t).then(function(t){return t.read.apply(this,e)}.bind(this))}.bind(this),write:function(){var e=arguments;return this.lookup(t).then(function(t){return t.write.apply(this,e)}.bind(this))}.bind(this)}},this.register=function(e,n){return t[e]=Promise.resolve(n),t[e]},this.child=function(){return new n(Object.create(t))}}var r,o;r=t("../mime"),o=new n({}),o.register("application/hal",t("./type/application/hal")),o.register("application/json",t("./type/application/json")),o.register("application/x-www-form-urlencoded",t("./type/application/x-www-form-urlencoded")),o.register("multipart/form-data",t("./type/multipart/form-data")),o.register("text/plain",t("./type/text/plain")),o.register("+json",o.delegate("application/json")),e.exports=o},{"../mime":43,"./type/application/hal":45,"./type/application/json":46,"./type/application/x-www-form-urlencoded":47,"./type/multipart/form-data":48,"./type/text/plain":49}],45:[function(t,e){"use strict";function n(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!1,writeable:!0})}var r,o,i,a,s;r=t("../../../interceptor/pathPrefix"),o=t("../../../interceptor/template"),i=t("../../../util/find"),a=t("../../../util/lazyPromise"),s=t("../../../util/responsePromise"),e.exports={read:function(t,e){function u(t,e){(e&&l&&l.warn||l.log)&&(l.warn||l.log).call(l,"Relationship '"+t+"' is deprecated, see "+e)}var c,l;return e=e||{},c=e.client,l=e.console||l,e.registry.lookup(e.mime.suffix).then(function(n){return n.read(t,e)}).then(function(t){return i.findProperties(t,"_embedded",function(t,e,r){Object.keys(t).forEach(function(r){if(!(r in e)){var o=s({entity:t[r]});n(e,r,o)}}),n(e,r,t)}),i.findProperties(t,"_links",function(t,e,i){Object.keys(t).forEach(function(r){var i=t[r];r in e||n(e,r,s.make(a(function(){return i.deprecation&&u(r,i.deprecation),i.templated===!0?o(c)({path:i.href}):c({path:i.href})})))}),n(e,i,t),n(e,"clientFor",function(e,n){var i=t[e];if(!i)throw new Error("Unknown relationship: "+e);return i.deprecation&&u(e,i.deprecation),i.templated===!0?o(n||c,{template:i.href}):r(n||c,{prefix:i.href})}),n(e,"requestFor",function(t,e,n){var r=this.clientFor(t,n);return r(e)})}),t})},write:function(t,e){return e.registry.lookup(e.mime.suffix).then(function(n){return n.write(t,e)})}}},{"../../../interceptor/pathPrefix":41,"../../../interceptor/template":42,"../../../util/find":53,"../../../util/lazyPromise":54,"../../../util/responsePromise":57}],46:[function(t,e){"use strict";function n(t,e){return{read:function(e){return JSON.parse(e,t)},write:function(t){return JSON.stringify(t,e)},extend:n}}e.exports=n()},{}],47:[function(t,e){"use strict";function n(t){return t=encodeURIComponent(t),t.replace(i,"+")}function r(t){return t=t.replace(a," "),decodeURIComponent(t)}function o(t,e,r){return Array.isArray(r)?r.forEach(function(n){t=o(t,e,n)}):(t.length>0&&(t+="&"),t+=n(e),void 0!==r&&null!==r&&(t+="="+n(r))),t}var i,a;i=/%20/g,a=/\+/g,e.exports={read:function(t){var e={};return t.split("&").forEach(function(t){var n,o,i;n=t.split("="),o=r(n[0]),i=2===n.length?r(n[1]):null,o in e?(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(i)):e[o]=i}),e},write:function(t){var e="";return Object.keys(t).forEach(function(n){e=o(e,n,t[n])}),e}}},{}],48:[function(t,e){"use strict";function n(t){return t&&1===t.nodeType&&"FORM"===t.tagName}function r(t){var e,n=new FormData;for(var r in t)t.hasOwnProperty(r)&&(e=t[r],e instanceof File?n.append(r,e,e.name):e instanceof Blob?n.append(r,e):n.append(r,String(e)));return n}e.exports={write:function(t){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(t instanceof FormData)return t;if(n(t))return new FormData(t);if("object"==typeof t&&null!==t)return r(t);throw new Error("Unable to create FormData from object "+t)}}},{}],49:[function(t,e){"use strict";e.exports={read:function(t){return t},write:function(t){return t.toString()}}},{}],50:[function(t,e){e.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,n){function r(t){q>S||(S>q&&(q=S,T=[]),T.push(t))}function o(){var t,n,o,a,s,u,c,l,p;for(u=S,c=S,t=[],l=S,p=S,n=i(),null!==n?(o=h(),null!==o?(44===e.charCodeAt(S)?(a=",",S++):(a=null,0===P&&r('","')),null!==a?(s=h(),null!==s?n=[n,o,a,s]:(n=null,S=p)):(n=null,S=p)):(n=null,S=p)):(n=null,S=p),null!==n&&(n=function(t,e){return e}(l,n[0])),null===n&&(S=l);null!==n;)t.push(n),l=S,p=S,n=i(),null!==n?(o=h(),null!==o?(44===e.charCodeAt(S)?(a=",",S++):(a=null,0===P&&r('","')),null!==a?(s=h(),null!==s?n=[n,o,a,s]:(n=null,S=p)):(n=null,S=p)):(n=null,S=p)):(n=null,S=p),null!==n&&(n=function(t,e){return e}(l,n[0])),null===n&&(S=l);return null!==t?(n=i(),null!==n?t=[t,n]:(t=null,S=c)):(t=null,S=c),null!==t&&(t=function(t,e,n){return e.concat([n])}(u,t[0],t[1])),null===t&&(S=u),t}function i(){var t,n,o,i,u,c,l,p;if(l=S,p=S,60===e.charCodeAt(S)?(t="<",S++):(t=null,0===P&&r('"<"')),null!==t)if(n=s(),null!==n)if(62===e.charCodeAt(S)?(o=">",S++):(o=null,0===P&&r('">"')),null!==o)if(i=h(),null!==i){for(u=[],c=a();null!==c;)u.push(c),c=a();null!==u?t=[t,n,o,i,u]:(t=null,S=p)}else t=null,S=p;else t=null,S=p;else t=null,S=p;else t=null,S=p;return null!==t&&(t=function(t,e,n){var r={};return n.forEach(function(t){r[t[0]]=t[1]}),r.href=e,r}(l,t[1],t[4])),null===t&&(S=l),t}function a(){var t,n,o,i,a,s;return a=S,s=S,59===e.charCodeAt(S)?(t=";",S++):(t=null,0===P&&r('";"')),null!==t?(n=h(),null!==n?(o=u(),null!==o?(i=h(),null!==i?t=[t,n,o,i]:(t=null,S=s)):(t=null,S=s)):(t=null,S=s)):(t=null,S=s),null!==t&&(t=function(t,e){return e}(a,t[2])),null===t&&(S=a),t}function s(){var t,n,o;if(o=S,/^[^>]/.test(e.charAt(S))?(n=e.charAt(S),S++):(n=null,0===P&&r("[^>]")),null!==n)for(t=[];null!==n;)t.push(n),/^[^>]/.test(e.charAt(S))?(n=e.charAt(S),S++):(n=null,0===P&&r("[^>]"));else t=null;return null!==t&&(t=function(t,e){return e.join("")}(o,t)),null===t&&(S=o),t}function u(){var t,e,n,r;return n=S,r=S,t=c(),null!==t?(e=l(),e=null!==e?e:"",null!==e?t=[t,e]:(t=null,S=r)):(t=null,S=r),null!==t&&(t=function(t,e,n){return[e,n]}(n,t[0],t[1])),null===t&&(S=n),t}function c(){var t,n,o;if(o=S,/^[a-z]/.test(e.charAt(S))?(n=e.charAt(S),S++):(n=null,0===P&&r("[a-z]")),null!==n)for(t=[];null!==n;)t.push(n),/^[a-z]/.test(e.charAt(S))?(n=e.charAt(S),S++):(n=null,0===P&&r("[a-z]"));else t=null;return null!==t&&(t=function(t,e){return e.join("")}(o,t)),null===t&&(S=o),t}function l(){var t,n,o,i;return o=S,i=S,61===e.charCodeAt(S)?(t="=",S++):(t=null,0===P&&r('"="')),null!==t?(n=p(),null===n&&(n=d()),null!==n?t=[t,n]:(t=null,S=i)):(t=null,S=i),null!==t&&(t=function(t,e){return e}(o,t[1])),null===t&&(S=o),t}function p(){var t,e,n;if(n=S,e=f(),null!==e)for(t=[];null!==e;)t.push(e),e=f();else t=null;return null!==t&&(t=function(t,e){return e.join("")}(n,t)),null===t&&(S=n),t}function f(){var t;return 33===e.charCodeAt(S)?(t="!",S++):(t=null,0===P&&r('"!"')),null===t&&(35===e.charCodeAt(S)?(t="#",S++):(t=null,0===P&&r('"#"')),null===t&&(36===e.charCodeAt(S)?(t="$",S++):(t=null,0===P&&r('"$"')),null===t&&(37===e.charCodeAt(S)?(t="%",S++):(t=null,0===P&&r('"%"')),null===t&&(38===e.charCodeAt(S)?(t="&",S++):(t=null,0===P&&r('"&"')),null===t&&(39===e.charCodeAt(S)?(t="'",S++):(t=null,0===P&&r('"\'"')),null===t&&(40===e.charCodeAt(S)?(t="(",S++):(t=null,0===P&&r('"("')),null===t&&(41===e.charCodeAt(S)?(t=")",S++):(t=null,0===P&&r('")"')),null===t&&(42===e.charCodeAt(S)?(t="*",S++):(t=null,0===P&&r('"*"')),null===t&&(43===e.charCodeAt(S)?(t="+",S++):(t=null,0===P&&r('"+"')),null===t&&(45===e.charCodeAt(S)?(t="-",S++):(t=null,0===P&&r('"-"')),null===t&&(46===e.charCodeAt(S)?(t=".",S++):(t=null,0===P&&r('"."')),null===t&&(124===e.charCodeAt(S)?(t="|",S++):(t=null,0===P&&r('"|"')),null===t&&(t=w(),null===t&&(58===e.charCodeAt(S)?(t=":",S++):(t=null,0===P&&r('":"')),null===t&&(60===e.charCodeAt(S)?(t="<",S++):(t=null,0===P&&r('"<"')),null===t&&(61===e.charCodeAt(S)?(t="=",S++):(t=null,0===P&&r('"="')),null===t&&(62===e.charCodeAt(S)?(t=">",S++):(t=null,0===P&&r('">"')),null===t&&(63===e.charCodeAt(S)?(t="?",S++):(t=null,0===P&&r('"?"')),null===t&&(64===e.charCodeAt(S)?(t="@",S++):(t=null,0===P&&r('"@"')),null===t&&(t=b(),null===t&&(91===e.charCodeAt(S)?(t="[",S++):(t=null,0===P&&r('"["')),null===t&&(93===e.charCodeAt(S)?(t="]",S++):(t=null,0===P&&r('"]"')),null===t&&(94===e.charCodeAt(S)?(t="^",S++):(t=null,0===P&&r('"^"')),null===t&&(95===e.charCodeAt(S)?(t="_",S++):(t=null,0===P&&r('"_"')),null===t&&(96===e.charCodeAt(S)?(t="`",S++):(t=null,0===P&&r('"`"')),null===t&&(123===e.charCodeAt(S)?(t="{",S++):(t=null,0===P&&r('"{"')),null===t&&(/^[\/\/]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[\\/\\/]")),null===t&&(125===e.charCodeAt(S)?(t="}",S++):(t=null,0===P&&r('"}"')),null===t&&(126===e.charCodeAt(S)?(t="~",S++):(t=null,0===P&&r('"~"'))))))))))))))))))))))))))))))),t}function h(){var t,e;for(t=[],e=x();null!==e;)t.push(e),e=x();return t}function d(){var t,e,n,r,o;return r=S,o=S,t=_(),null!==t?(e=m(),null!==e?(n=_(),null!==n?t=[t,e,n]:(t=null,S=o)):(t=null,S=o)):(t=null,S=o),null!==t&&(t=function(t,e){return e}(r,t[1])),null===t&&(S=r),t}function m(){var t,e,n;for(n=S,t=[],e=k(),null===e&&(e=j());null!==e;)t.push(e),e=k(),null===e&&(e=j());return null!==t&&(t=function(t,e){return e.join("")}(n,t)),null===t&&(S=n),t}function y(){var t;return/^[\0-]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[\\0-]")),t}function v(){var t;return/^[A-Z]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[A-Z]")),t}function g(){var t;return/^[a-z]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[a-z]")),t}function b(){var t;return t=v(),null===t&&(t=g()),t}function w(){var t;return/^[0-9]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[0-9]")),t}function x(){var t;return/^[ ]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[ ]")),t}function _(){var t;return/^["]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r('["]')),t}function k(){var t;return/^[^"]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r('[^"]')),t}function j(){var t,n,o;return o=S,/^[\\]/.test(e.charAt(S))?(t=e.charAt(S),S++):(t=null,0===P&&r("[\\\\]")),null!==t?(n=y(),null!==n?t=[t,n]:(t=null,S=o)):(t=null,S=o),t}function A(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}function C(){for(var t=1,n=1,r=!1,o=0;o<Math.max(S,q);o++){var i=e.charAt(o);"\n"===i?(r||t++,n=1,r=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}var O={start:o,LinkValue:i,LinkParams:a,URIReference:s,LinkParam:u,LinkParamName:c,LinkParamValue:l,PToken:p,PTokenChar:f,OptionalSP:h,QuotedString:d,QuotedStringInternal:m,Char:y,UpAlpha:v,LoAlpha:g,Alpha:b,Digit:w,SP:x,DQ:_,QDText:k,QuotedPair:j};if(void 0!==n){if(void 0===O[n])throw new Error("Invalid rule name: "+t(n)+".")}else n="start";var S=0,P=0,q=0,T=[],E=O[n]();if(null===E||S!==e.length){var z=Math.max(S,q),M=z<e.length?e.charAt(z):null,U=C();throw new this.SyntaxError(A(T),M,z,U.line,U.column)}return E},toSource:function(){return this._source}};return e.SyntaxError=function(e,n,r,o,i){function a(e,n){var r,o;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return o=n?t(n):"end of input","Expected "+r+" but "+o+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=a(e,n),this.offset=r,this.line=o,this.column=i},e.SyntaxError.prototype=Error.prototype,e}()},{}],51:[function(t,e){"use strict";function n(t){try{return Promise.resolve(t())}catch(e){return Promise.reject(e)}}e.exports=n},{}],52:[function(t,e){"use strict";function n(t){if(/([^\u0000-\u00ff])/.test(t))throw new Error("Can't base64 encode non-ASCII characters.");for(var e,n,r,i=0,a=[];i<t.length;){switch(e=t.charCodeAt(i),r=i%3){case 0:a.push(o.charAt(e>>2));break;case 1:a.push(o.charAt((3&n)<<4|e>>4));break;case 2:a.push(o.charAt((15&n)<<2|e>>6)),a.push(o.charAt(63&e))}n=e,i+=1}return 0===r?(a.push(o.charAt((3&n)<<4)),a.push("==")):1===r&&(a.push(o.charAt((15&n)<<2)),a.push("=")),a.join("")}function r(t){if(t=t.replace(/\s/g,""),!/^[a-z0-9\+\/\s]+\={0,2}$/i.test(t)||t.length%4>0)throw new Error("Not a base64-encoded string.");var e,n,r,i=0,a=[];for(t=t.replace(/\=/g,"");i<t.length;){switch(e=o.indexOf(t.charAt(i)),r=i%4){case 1:a.push(String.fromCharCode(n<<2|e>>4));break;case 2:a.push(String.fromCharCode((15&n)<<4|e>>2));break;case 3:a.push(String.fromCharCode((3&n)<<6|e))}n=e,i+=1}return a.join("")}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports={encode:n,decode:r}},{}],53:[function(t,e){"use strict";e.exports={findProperties:function n(t,e,r){"object"==typeof t&&null!==t&&(e in t&&r(t[e],t,e),Object.keys(t).forEach(function(o){n(t[o],e,r)}))}}},{}],54:[function(t,e){"use strict";function n(t){var e,n,o,i;return e=!1,o=new Promise(function(t,e){n={resolve:t,reject:e}}),i=o.then,o.then=function(){return e||(e=!0,r(t).then(n.resolve,n.reject)),i.apply(o,arguments)},o}var r=t("./attempt");e.exports=n},{"./attempt":51}],55:[function(t,e){"use strict";function n(t){var e,n,o,i;for(t||(t={}),e=1,n=arguments.length;n>e;e+=1){o=arguments[e];for(i in o)i in t&&(t[i]===o[i]||i in r&&r[i]===o[i])||(t[i]=o[i])}return t}var r={};e.exports=n},{}],56:[function(t,e){"use strict";function n(t){return t.toLowerCase().split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}e.exports=n},{}],57:[function(t,e){"use strict";function n(t,e){return t.then(function(t){return t&&t[e]},function(t){return Promise.reject(t&&t[e])})}function r(){return n(this,"entity")}function o(){return n(n(this,"status"),"code")}function i(){return n(this,"headers")}function a(t){return t=l(t),n(this.headers(),t)}function s(t){return t=[].concat(t),u(t.reduce(function(t,e){
return t.then(function(t){if("string"==typeof e&&(e={rel:e}),"function"!=typeof t.entity.clientFor)throw new Error("Hypermedia response expected");var n=t.entity.clientFor(e.rel);return n({params:e.params})})},this))}function u(t){return t.status=o,t.headers=i,t.header=a,t.entity=r,t.follow=s,t}function c(t,e,n){return u(Promise.resolve(t).then(e,n))}var l=t("./normalizeHeaderName");c.make=u,c.reject=function(t){return u(Promise.reject(t))},c.promise=function(t){return u(new Promise(t))},e.exports=c},{"./normalizeHeaderName":56}],58:[function(t,e){"use strict";function n(t,e){if("string"!=typeof t)throw new Error("String required for URL encoding");return t.split("").map(function(t){if(e.hasOwnProperty(t))return t;var n=t.charCodeAt(0);if(127>=n){var r=n.toString(16).toUpperCase();return"%"+(r.length%2===1?"0":"")+r}return encodeURIComponent(t).toUpperCase()}).join("")}function r(t){return t=t||i.unreserved,function(e){return n(e,t)}}function o(t){return decodeURIComponent(t)}var i;i=function(){var t={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return t.genDelims=":/?#[]@",t.subDelims="!$&'()*+,;=",t.reserved=t.genDelims+t.subDelims,t.unreserved=t.alpha+t.digit+"-._~",t.url=t.reserved+t.unreserved,t.scheme=t.alpha+t.digit+"+-.",t.userinfo=t.unreserved+t.subDelims+":",t.host=t.unreserved+t.subDelims,t.port=t.digit,t.pchar=t.unreserved+t.subDelims+":@",t.segment=t.pchar,t.path=t.segment+"/",t.query=t.pchar+"/?",t.fragment=t.pchar+"/?",Object.keys(t).reduce(function(e,n){return e[n]=t[n].split("").reduce(function(t,e){return t[e]=!0,t},{}),e},{})}(),e.exports={decode:o,encode:r(),encodeURL:r(i.url),encodeScheme:r(i.scheme),encodeUserInfo:r(i.userinfo),encodeHost:r(i.host),encodePort:r(i.port),encodePathSegment:r(i.segment),encodePath:r(i.path),encodeQuery:r(i.query),encodeFragment:r(i.fragment)}},{}],59:[function(t,e){"use strict";function n(t,e,n){return e.split(",").reduce(function(e,r){var o,a;if(o={},"*"===r.slice(-1)&&(r=r.slice(0,-1),o.explode=!0),s.test(r)){var u=s.exec(r);r=u[1],o.maxLength=parseInt(u[2])}return r=i.decode(r),a=n[r],void 0===a||null===a?e:(Array.isArray(a)?e=a.reduce(function(e,n){return e.length?(e+=o.explode?t.separator:",",t.named&&o.explode&&(e+=t.encoder(r),e+=n.length?"=":t.empty)):(e+=t.first,t.named&&(e+=t.encoder(r),e+=n.length?"=":t.empty)),e+=t.encoder(n)},e):"object"==typeof a?e=Object.keys(a).reduce(function(e,n){return e.length?e+=o.explode?t.separator:",":(e+=t.first,t.named&&!o.explode&&(e+=t.encoder(r),e+=a[n].length?"=":t.empty)),e+=t.encoder(n),e+=o.explode?"=":",",e+=t.encoder(a[n])},e):(a=String(a),o.maxLength&&(a=a.slice(0,o.maxLength)),e+=e.length?t.separator:t.first,t.named&&(e+=t.encoder(r),e+=a.length?"=":t.empty),e+=t.encoder(a)),e)},"")}function r(t,e){var r;if(r=a[t.slice(0,1)],r?t=t.slice(1):r=a[""],r.reserved)throw new Error("Reserved expression operations are not supported");return n(r,t,e)}function o(t,e){var n,o,i;for(i="",o=0;;){if(n=t.indexOf("{",o),-1===n){i+=t.slice(o);break}i+=t.slice(o,n),o=t.indexOf("}",n)+1,i+=r(t.slice(n+1,o-1),e)}return i}var i,a,s;i=t("./uriEncoder"),s=/^([^:]*):([0-9]+)$/,a={"":{first:"",separator:",",named:!1,empty:"",encoder:i.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:i.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:i.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:i.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:i.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:i.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:i.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:i.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},e.exports={expand:o}},{"./uriEncoder":58}],60:[function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,n){if(t&&c(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}function i(t){return u(t)&&(t=o(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function s(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function p(t){return null==t}var f=t("punycode");n.parse=o,n.resolve=a,n.resolveObject=s,n.format=i,n.Url=r;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],y=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(y),g=["%","/","?",";","#"].concat(v),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},j={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=t("querystring");r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var o=h.exec(r);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,r=r.substr(o.length)}if(n||o||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||o&&j[o]||(r=r.substr(2),this.slashes=!0)}if(!j[o]&&(a||o&&!A[o])){for(var s=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===s||s>l)&&(s=l)}var p,d;d=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==d&&(p=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(p)),s=-1;for(var c=0;c<g.length;c++){var l=r.indexOf(g[c]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),c=0,O=y.length;O>c;c++){var S=y[c];if(S&&!S.match(x)){for(var P="",q=0,T=S.length;T>q;q++)P+=S.charCodeAt(q)>127?"x":S[q];if(!P.match(x)){var E=y.slice(0,c),z=y.slice(c+1),M=S.match(_);M&&(E.push(M[1]),z.unshift(M[2])),z.length&&(r="/"+z.join(".")+r),this.hostname=E.join(".");break}}}if(this.hostname=this.hostname.length>w?"":this.hostname.toLowerCase(),!m){for(var U=this.hostname.split("."),F=[],c=0;c<U.length;++c){var D=U[c];F.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(D):D)}this.hostname=F.join(".")}var I=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+I,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!k[i])for(var c=0,O=v.length;O>c;c++){var N=v[c],L=encodeURIComponent(N);L===N&&(L=escape(N)),r=r.split(N).join(L)}var J=r.indexOf("#");-1!==J&&(this.hash=r.substr(J),r=r.slice(0,J));var B=r.indexOf("?");if(-1!==B?(this.search=r.substr(B),this.query=r.substr(B+1),e&&(this.query=C.parse(this.query)),r=r.slice(0,B)):e&&(this.search="",this.query={}),r&&(this.pathname=r),A[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var I=this.pathname||"",D=this.search||"";this.path=I+D}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=C.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||A[e])&&o!==!1?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),A[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!A[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||j[t.protocol])n.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),n.pathname=o.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var i=n.pathname||"",a=n.search||"";n.path=i+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=c||s||n.host&&t.pathname,h=f,d=n.pathname&&n.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],m=n.protocol&&!A[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),f=f&&(""===o[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),n.search=t.search,n.query=t.query;else if(!p(t.search)){if(m){n.hostname=n.host=d.shift();var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var v=d.slice(-1)[0],g=(n.host||t.host)&&("."===v||".."===v)||""===v,b=0,w=d.length;w>=0;w--)v=d[w],"."==v?d.splice(w,1):".."===v?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!f&&!h)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),g&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=x?"":d.length?d.shift():"";var y=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return f=f||n.host&&d.length,f&&!x&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:28,querystring:31}],61:[function(t,e){var n=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),0>=t)return"0";for(var r=Math.log(Math.pow(2,t))/Math.log(e),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,t/o))/Math.log(e)*o;for(var i=r-Math.floor(r),a="",o=0;o<Math.floor(r);o++){var s=Math.floor(Math.random()*e).toString(e);a=s+a}if(i){var u=Math.pow(e,i),s=Math.floor(Math.random()*u).toString(e);a=s+a}var c=parseInt(a,e);return c!==1/0&&c>=Math.pow(2,t)?n(t,e):a}},{}],62:[function(t,e){(function(t){"use strict";var n=t.env.NODE_ENV,r=function(t,e,r,o,i,a,s,u){if("production"!==n&&void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,o,i,a,s,u],p=0;c=new Error(e.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}};e.exports=r}).call(this,t("_process"))},{_process:27}],63:[function(t,e){"use strict";function n(t,e){t=Math.round(t*e),t<<=1,0>t&&(t=~t);for(var n="";t>=32;)n+=String.fromCharCode((32|31&t)+63),t>>=5;return n+=String.fromCharCode(t+63)}function r(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice().reverse());return e}var o={};o.encode=function(t,e){if(!t.length)return"";for(var r=Math.pow(10,e||5),o=n(t[0][0],r)+n(t[0][1],r),i=1;i<t.length;i++){var a=t[i],s=t[i-1];o+=n(a[0]-s[0],r),o+=n(a[1]-s[1],r)}return o},o.fromGeoJSON=function(t,e){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return o.encode(r(t.coordinates),e)},e.exports=o},{}],64:[function(t,e){function n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t}function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t}e.exports.extendMutable=n,e.exports.extend=r;var o=Object.prototype.hasOwnProperty},{}]},{},[9])(9)});