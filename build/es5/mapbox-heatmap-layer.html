<html><head><link rel="import" href="../polymer/polymer-element.html"><link rel="import" href="../polymer/lib/elements/dom-repeat.html"><link rel="import" href="./mapbox-layer.html"></head><body><dom-module id="mapbox-heatmap-layer"><template><template is="dom-repeat" items="[[_layers]]"><mapbox-layer layer-id="[[item.layerId]]" map="[[map]]" source="[[source]]" source-layer="[[sourceLayer]]" rendering-type="circle" radius="[[item.radius]]" color="[[item.color]]" opacity="[[item.opacity]]" blur="[[item.blur]]" filter="[[item.filter]]"></mapbox-layer></template></template><script>var MapboxHeatmapLayer=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_createLevels',value:function(d){if(d&&this.map&&this.layerId&&this.source){for(var e=d.length,f=Array(d.length),g=0;g<e;++g)f[g]=this._createLevel(d,g);return f}}},{key:'_createLevel',value:function(d,e){var f=Object.create(null),g=d[e],h=d[Math.max(e-1,0)];return f.layerId=this.layerId+'_'+e,f.color=g.color||this.color,f.radius=g.radius||this.radius,f.blur=g.blur||1,f.opacity=g.opacity||this.opacity,f.filter=0===g.count?['!=','cluster',!0]:e==d.length-1?['>','point_count',h.count||0]:['all',['>','point_count',h.count||0],['<=','point_count',g.count||0]],f}}],[{key:'is',get:function(){return'mapbox-heatmap-layer'}},{key:'properties',get:function(){return{map:{type:Object},layerId:{type:String},source:{type:String},sourceLayer:{type:String},radius:{type:Number,value:70},opacity:{type:Number,value:1},color:{type:String,value:'#4CAF50'},levels:{type:Array},_layers:{type:Array,computed:'_createLevels(levels, map, layerId, source)'}}}}]),b}(Polymer.Element);window.customElements.define(MapboxHeatmapLayer.is,MapboxHeatmapLayer);</script></dom-module></body></html>